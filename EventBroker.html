<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.34.2">
    <meta name="project" content="Anoma v0.28.0">


    <title>EventBroker â€” Anoma v0.28.0</title>
    <link rel="stylesheet" href="dist/html-elixir-F2VRIOKR.css" />


    <script src="dist/handlebars.runtime-NWIB6V2M.js"></script>
    <script src="dist/handlebars.templates-K7URE6B4.js"></script>
    <script src="dist/sidebar_items-E5C3E840.js"></script>
    <script src="docs_config.js"></script>
    <script async src="dist/html-YIPIRHGU.js"></script>

  </head>
  <body data-type="modules" class="page-module">
    <script>

      try {
        var settings = JSON.parse(localStorage.getItem('ex_doc:settings') || '{}');

        if (settings.theme === 'dark' ||
           ((settings.theme === 'system' || settings.theme == null) &&
             window.matchMedia('(prefers-color-scheme: dark)').matches)
           ) {
          document.body.classList.add('dark')
        }
      } catch (error) { }
    </script>

<div class="body-wrapper">

<button id="sidebar-menu" class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

      <div>
        <a href="readme.html" class="sidebar-projectName" translate="no">
Anoma
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v0.28.0
        </div>
      </div>
    </div>
    <ul id="sidebar-listNav" class="sidebar-listNav" role="tablist">
      <li>
        <button id="extras-list-tab-button" role="tab" data-type="extras" aria-controls="extras-tab-panel" aria-selected="true" tabindex="0">
GUIDES
        </button>
      </li>

        <li>
          <button id="modules-list-tab-button" role="tab" data-type="modules" aria-controls="modules-tab-panel" aria-selected="false" tabindex="-1">
            Modules
          </button>
        </li>


        <li>
          <button id="tasks-list-tab-button" role="tab" data-type="tasks" aria-controls="tasks-tab-panel" aria-selected="false" tabindex="-1">
            <span translate="no">Mix</span> Tasks
          </button>
        </li>

    </ul>
  </div>

  <div id="extras-tab-panel" class="sidebar-tabpanel" role="tabpanel" aria-labelledby="extras-list-tab-button">
    <ul id="extras-full-list" class="full-list"></ul>
  </div>

    <div id="modules-tab-panel" class="sidebar-tabpanel" role="tabpanel" aria-labelledby="modules-list-tab-button" hidden>
      <ul id="modules-full-list" class="full-list"></ul>
    </div>


    <div id="tasks-tab-panel" class="sidebar-tabpanel" role="tabpanel" aria-labelledby="tasks-list-tab-button" hidden>
      <ul id="tasks-full-list" class="full-list"></ul>
    </div>

</nav>

<main class="content">
  <output role="status" id="toast"></output>

  <div id="content" class="content-inner">
    <div class="top-search">
      <div class="search-settings">
        <form class="search-bar" action="search.html">
          <label class="search-label">
            <span class="sr-only">Search documentation of Anoma</span>
            <input name="q" type="text" class="search-input" placeholder="Press / to search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
          </label>
          <button type="submit" class="search-button" aria-label="Submit Search">
            <i class="ri-search-2-line ri-lg" aria-hidden="true" title="Submit search"></i>
          </button>
          <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
            <i class="ri-close-line ri-lg" title="Cancel search"></i>
          </button>
        </form>
        <div class="autocomplete">
        </div>
        <button class="icon-settings display-settings">
          <i class="ri-settings-3-line"></i>
          <span class="sr-only">Settings</span>
        </button>
      </div>
    </div>

<div id="top-content">
  <h1>

    <span translate="no">EventBroker</span> 
    <small class="app-vsn" translate="no">(Anoma v0.28.0)</small>

  </h1>


    <section id="moduledoc">
<p>I am the EventBroker Application Module.</p><p>I startup the PubSub system as an own OTP application. Moreover I provide
all the API necessary for the use of the system. I contain all public
functionality provided by the Broker and the Registry.</p><h3 id="module-public-api" class="section-heading">
  <a href="#module-public-api" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Public API</span>
</h3>
<p>I have the following public functionality:</p><ul><li><a href="#event/1"><code class="inline">event/1</code></a></li><li><a href="#subscribe_me/1"><code class="inline">subscribe_me/1</code></a></li><li><a href="#unsubscribe_me/1"><code class="inline">unsubscribe_me/1</code></a></li><li><a href="#subscribe/2"><code class="inline">subscribe/2</code></a></li><li><a href="#unsubscribe/2"><code class="inline">unsubscribe/2</code></a></li></ul>
    </section>

</div>

  <section id="summary" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#summary">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Summary</span>
    </h1>
<div class="summary-types summary">
  <h2>
    <a href="#types">Types</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:filter_spec_list/0" data-no-tooltip translate="no">filter_spec_list()</a>

      </div>

        <div class="summary-synopsis"><p>I am a filter dependency specification, I am a list of filter specs listed
in the order in which the filter agents implementing said specs should be
subscribed to one another.</p></div>

    </div>

</div>
<div class="summary-functions summary">
  <h2>
    <a href="#functions">Functions</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#event/2" data-no-tooltip translate="no">event(event, broker \\ EventBroker.Broker)</a>

      </div>

        <div class="summary-synopsis"><p>I am the Event Broker event function.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#subscribe/3" data-no-tooltip translate="no">subscribe(pid, filter_spec_list, registry \\ EventBroker.Registry)</a>

      </div>

        <div class="summary-synopsis"><p>I am the subscription function.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#subscribe_me/2" data-no-tooltip translate="no">subscribe_me(filter_spec_list, registry \\ EventBroker.Registry)</a>

      </div>

        <div class="summary-synopsis"><p>I am a subscription function specifically for <code class="inline">self()</code></p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#unsubscribe/3" data-no-tooltip translate="no">unsubscribe(pid, filter_spec_list, registry \\ EventBroker.Registry)</a>

      </div>

        <div class="summary-synopsis"><p>I am the unsubscription function.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#unsubscribe_me/2" data-no-tooltip translate="no">unsubscribe_me(filter_spec_list, registry \\ EventBroker.Registry)</a>

      </div>

        <div class="summary-synopsis"><p>I am the unsubscription function specifically for <code class="inline">self()</code></p></div>

    </div>

</div>

  </section>


  <section id="types" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#types">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Types</span>
    </h1>
    <div class="types-list">
<section class="detail" id="t:filter_spec_list/0">

  <div class="detail-header">
    <a href="#t:filter_spec_list/0" class="detail-link" data-no-tooltip title="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature" translate="no">filter_spec_list()</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@type</span> filter_spec_list() :: [<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">struct</a>()]</pre>

      </div>

<p>I am a filter dependency specification, I am a list of filter specs listed
in the order in which the filter agents implementing said specs should be
subscribed to one another.</p>
  </section>
</section>

    </div>
  </section>

  <section id="functions" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#functions">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Functions</span>
    </h1>
    <div class="functions-list">
<section class="detail" id="event/2">

    <span id="event/1"></span>

  <div class="detail-header">
    <a href="#event/2" class="detail-link" data-no-tooltip title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">event(event, broker \\ EventBroker.Broker)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> event(<a href="EventBroker.Event.html#t:t/0">EventBroker.Event.t</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">atom</a>()) :: :ok</pre>

      </div>

<p>I am the Event Broker event function.</p><p>I process any incoming events by sending them to all of Broker subscribers
using the <a href="https://hexdocs.pm/elixir/Kernel.html#send/2"><code class="inline">send/2</code></a> functionality.</p>
  </section>
</section>
<section class="detail" id="subscribe/3">

    <span id="subscribe/2"></span>

  <div class="detail-header">
    <a href="#subscribe/3" class="detail-link" data-no-tooltip title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">subscribe(pid, filter_spec_list, registry \\ EventBroker.Registry)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> subscribe(<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">pid</a>(), <a href="#t:filter_spec_list/0">filter_spec_list</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">atom</a>()) :: :ok | <a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>()</pre>

      </div>

<p>I am the subscription function.</p><p>Given a PID and a list of filter specs, I ensure that all the actors
corresponding to each spec given in the list is launched and subscribed
to each other in the appropriate order - e.g. given <code class="inline">[spec1, spec2]</code> I
ensure that agents implemented <code class="inline">spec1</code> and <code class="inline">spec2</code> are launched and that
the former is subscribed to the top broker, while the latter is subscribed
to the former.</p><p>I also do this in a minimal fashion, that is, if some starting subchain of
filter spec dependency has already been registered, I launch the minimal
chain remaining to build the full dependency.</p><p>Note that each filter actor is hence not only determined by the filtering
functionality it has but also on the chain of dependencies it is spawned
with. Hence <code class="inline">[spec1, spec2]</code> corresponds to an agent different from
<code class="inline">[spec2]</code>.</p><p>Afterwards, I subscribe the given PID to the final filter agent in the
dependency chain and register all the new agents in the map by putting
the filter agent PIDs as values to their dependency filter specification.</p><p>If I notice that any of the filter structures do not have an appropriate
public filter functionality exposed, I return the list of such modules
back to the user and do nothing with respect to agent-spawning or
registration.</p><p>Filter Agent spawning is handled via DynamicSupervisor.</p>
  </section>
</section>
<section class="detail" id="subscribe_me/2">

    <span id="subscribe_me/1"></span>

  <div class="detail-header">
    <a href="#subscribe_me/2" class="detail-link" data-no-tooltip title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">subscribe_me(filter_spec_list, registry \\ EventBroker.Registry)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> subscribe_me(<a href="#t:filter_spec_list/0">filter_spec_list</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">atom</a>()) :: :ok | <a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>()</pre>

      </div>

<p>I am a subscription function specifically for <code class="inline">self()</code></p><p>I call <a href="#subscribe/2"><code class="inline">subscribe/2</code></a> where the first argument is <code class="inline">self()</code></p>
  </section>
</section>
<section class="detail" id="unsubscribe/3">

    <span id="unsubscribe/2"></span>

  <div class="detail-header">
    <a href="#unsubscribe/3" class="detail-link" data-no-tooltip title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">unsubscribe(pid, filter_spec_list, registry \\ EventBroker.Registry)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> unsubscribe(<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">pid</a>(), <a href="#t:filter_spec_list/0">filter_spec_list</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">atom</a>()) :: :ok</pre>

      </div>

<p>I am the unsubscription function.</p><p>Given a PID and a list of filter specs, I get the PID of the related
filter agent by looking in my state, then ask it to unsubscribe the
given PID from it. In case the agent has other subscribers, I return the
base state.</p><p>Otherwise, it will shut down, prompting to recursively send unsubscription
requests to its parent filters and processing their termination
appropriately in a synchronous manner.</p><p>After all the requests have been sent and terminations recorded, I remove
all agents which have shut down from my registry map and return <code class="inline">:ok</code></p>
  </section>
</section>
<section class="detail" id="unsubscribe_me/2">

    <span id="unsubscribe_me/1"></span>

  <div class="detail-header">
    <a href="#unsubscribe_me/2" class="detail-link" data-no-tooltip title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">unsubscribe_me(filter_spec_list, registry \\ EventBroker.Registry)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> unsubscribe_me(<a href="#t:filter_spec_list/0">filter_spec_list</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">atom</a>()) :: :ok</pre>

      </div>

<p>I am the unsubscription function specifically for <code class="inline">self()</code></p><p>I call <a href="#unsubscribe/2"><code class="inline">unsubscribe/2</code></a> where the first argument is <code class="inline">self()</code></p>
  </section>
</section>

    </div>
  </section>

    <footer class="footer">
      <p>

          <span class="line">
            <a href="https://hex.pm/packages/anoma/0.28.0" class="footer-hex-package">Hex Package</a>

            <a href="https://preview.hex.pm/preview/anoma/0.28.0">Hex Preview</a>

          </span>

        <span class="line">
          <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
            Search HexDocs
          </button>

            <a href="Anoma.epub" title="ePub version">
              Download ePub version
            </a>

        </span>
      </p>

      <p class="built-using">
        Built using
        <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.34.2) for the

          <a href="https://elixir-lang.org" title="Elixir" target="_blank" translate="no">Elixir programming language</a>

      </p>

    </footer>
  </div>
</main>
</div>
<script src="https://cdn.jsdelivr.net/npm/mermaid@10.7.0/dist/mermaid.min.js"></script>
<script>
document.addEventListener("DOMContentLoaded", function () {
mermaid.initialize({
  startOnLoad: false,
  theme: document.body.className.includes("dark") ? "dark" : "default"
});
let id = 0;
for (const codeEl of document.querySelectorAll("pre code.mermaid")) {
  const preEl = codeEl.parentElement;
  const graphDefinition = codeEl.textContent;
  const graphEl = document.createElement("div");
  const graphId = "mermaid-graph-" + id++;
  mermaid.render(graphId, graphDefinition).then(({svg, bindFunctions}) => {
    graphEl.innerHTML = svg;
    bindFunctions?.(graphEl);
    preEl.insertAdjacentElement("afterend", graphEl);
    preEl.remove();
  });
}
});
</script>
<script src="https://cdn.jsdelivr.net/npm/vega@5.20.2"></script>
<script src="https://cdn.jsdelivr.net/npm/vega-lite@5.1.1"></script>
<script src="https://cdn.jsdelivr.net/npm/vega-embed@6.18.2"></script>
<script>
document.addEventListener("DOMContentLoaded", function () {
for (const codeEl of document.querySelectorAll("pre code.vega-lite")) {
  try {
    const preEl = codeEl.parentElement;
    const spec = JSON.parse(codeEl.textContent);
    const plotEl = document.createElement("div");
    preEl.insertAdjacentElement("afterend", plotEl);
    vegaEmbed(plotEl, spec);
    preEl.remove();
  } catch (error) {
    console.log("Failed to render Vega-Lite plot: " + error)
  }
}
});
</script>

  </body>
</html>
